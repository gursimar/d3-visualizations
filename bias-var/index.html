<!DOCTYPE html>
<meta charset="utf-8">

<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-blue.min.css" />
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<link rel="stylesheet" href="styles.css">

<body>
<div class="jumbotron text-center">
  <h2 class="jumbotext">Polynomial regression<font size="3">(<a style="color:#e7298a" target="_blank" href="https://en.wikipedia.org/wiki/Polynomial_regression">?</a>)</font> bias-variance tradeoff<font size="3">(<a style="color:#e7298a" target="_blank" href="https://en.wikipedia.org/wiki/Bias%E2%80%93variance_tradeoff">?</a>)</font> playground</h2>
  <p class = "jumbotext">Choose a function, try different values of p and see how you do on generalization error!</p> 
</div>
<div class="container-fluid">
  <div class="row">
    <div style="position:relative; left:80px;" class="col-sm-2">
    	<div style="margin-bottom:30px; margin-top:20px;">
	    	<h4>DATASET</h4>
	    	<p style="font:15px;">Which dataset you want to use?</p>
	        <div class="dataset-list">
	          <div class="dataset" title="Circle">
	            <img id="DS_a" src="images/a.png" class="data-thumbnail selected"></canvas>
	          </div>
	          <div class="dataset" title="Exclusive or">
	            <img id="DS_b" src="images/b.png" class="data-thumbnail"></canvas>
	          </div>
	          <div class="dataset" title="Gaussian">
	            <img id="DS_c" src="images/c.png" class="data-thumbnail"></canvas>
	          </div>
	        </div>	    	

			<!--div class="btn-group">
			  <button type="button" id="data_1" class="btn btn-default">Linear</button>
			  <button type="button" id="data_2" class="btn btn-default">Cmplx</button>
			  <button type="button" id="data_3" class="btn btn-default">Cmplx</button>
			</div-->
    	</div>
    	<div>
	    	<h4 id ="sample_text">Concentration (200)</h4>
		    	<p style="font:15px;">Amount of data to sample?</p>
	            <input id="sampledegree" class="mdl-slider mdl-js-slider" type="range" min="50" max="500" step="150" value="200" tabindex="0"> 
    	</div>

    	<div>
	    	<h4 id ="noise_text">Noise (200)</h4>
		    	<p style="font:15px;">How much noise?</p>
	            <input id="noisedegree" class="mdl-slider mdl-js-slider" type="range" min="0" max="1000" step="200" value="200" tabindex="0"> 
    	</div>
    	<br>
    	<div style="margin-top:50px">
	    	<h4 id ="poly_text">POLYNOMIAL DEGREE (2)</h4>
		    	<p style="font:15px;">What degree basis you want to fit?</p>
	            <input id="polydegree" class="mdl-slider mdl-js-slider" type="range" min="1" max="4" step="1" value="2" tabindex="0"> 

			<!--div class="btn-group">
			  <button type="button" class="btn btn-default" onclick="learnDrawCurve(1);">1</button>
			  <button type="button" class="btn btn-default" onclick="learnDrawCurve(2);">2</button>
			  <button type="button" class="btn btn-default" onclick="learnDrawCurve(3);">3</button>
			  <button type="button" class="btn btn-default" onclick="learnDrawCurve(4);">4</button>
			  <button type="button" class="btn btn-default" onclick="learnDrawCurve(5);">5</button>
			  <button type="button" class="btn btn-default" onclick="learnDrawCurve(6);">6</button>
			</div-->

    	</div>
		<!--br><br><br>
    	<div>
	    	<h4>Bias/Variance</h4>
			<div class="btn-group">
			  <button type="button" class="btn btn-default" onclick="generateBiasVarData()">Go</button>
			</div>
    	</div-->

    </div>
    <div class="col-sm-5">
    	<div style="position:relative; left:82px;margin-top:25px;" id ="plot-1">
    		<div style="position:absolute;top:250px; left:520px">
				<!--button type="button" class="btn btn-default" onclick="showBigPicture()">Big pic</button>
				<button type="button" class="btn btn-default" onclick="showActualPicture()">Actual pic</button-->
				<span id="zoom" class="glyphicon glyphicon-zoom-out" aria-hidden="true"></span>
			</div>
			<div  style="position:absolute;top:350px;left:80px;width:75%;text-align:justify;font-size:16px">
				The scatter plot at the top represent one instance of sampled data and regression line which fits it.
				The plots on the right (box and bar) is constructed by repeatedly sampling data and fitting regression lines. The box plot on the top-right shows the distribution of residuals. The bar chart on the right represent the bias and variance of residuals. Each bar/ box corresponds to a particular degree of regression line (shown on x-axis).<br><br>Steps:
				<ul style="font-size:14px;margin-top:10px">
					<li>Choose a dataset from the pane on the left.</li>
					<li>Analyze bias-variance tradeoff by changing data/ noise/ samples.</li>
					<li>Investiage different fits by changing degree of polynomial.</li>
					<li>Use the zoom-out symbol to see generalizability of your model</li>
				</ul>

			</div>

    	</div>
    </div>
    <div class="col-sm-5">
    	<div style="position:relative; left:65px;" id ="plot-2">
    	</div>
    	<br>
    	<div style="margin-top:-20px; margin-left:20px;" id ="plot-3">
    	</div>
    </div>
  </div>
  <div>

  		Text will go here
  </div>
</div>

</body>

<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="bower_components/d3/d3.js"></script>
<script src="bower_components/mathjs/dist/math.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
<!--script src="node_modules/js-regression/src/jsregression.js"></script-->
<script src="ml-functions.js"></script>
<script src="box.js"></script>
<script src="line_plot.js"></script>
<script src="event_handling.js"></script>
<script src="box_plot.js"></script>
<script src="bias-var.js"></script>
<script src="bar_plot.js"></script>

<script>
	var x = linspace(-7,10,0.085)
	var w = []
	var w_all = [
		[-5,50,1],
		[5, 6, 2, 3],
		[7,4,-1,10,-1]]
	var w_ind = 1
	var nf = 200 // noise factor
	var model_degree = 1
	var data = []
	var tData = [] // transformed data used in d3
	var rResult = [] //result of the regression fitting
	var rData = [] //transformed result data used in d3
	var view = 0;

	// Setup d3
	WIDTH_curve = 590
	HEIGHT_curve = 350
	var margin_curve = {top:20, right:20, bottom:30, left:80}
		width_curve = WIDTH_curve - margin.left - margin.right
		height_curve = HEIGHT_curve - margin.top - margin.bottom;

	var svg = d3.select("#plot-1").append("svg")
		.attr("width", width_curve + margin_curve.left + margin_curve.right)
		.attr("height", height_curve + margin_curve.top + margin_curve.bottom)
		.append("g")
			.attr("transform", "translate(" + margin_curve.left + "," + margin_curve.top + ")");

	var svg_data = svg.append("g").attr("class", "svg_data")
	var svg_curve = svg.append("g").attr("class", "svg_curve")
	var x_axis = svg.append("g").attr("class", "x axis")
	var y_axis = svg.append("g").attr("class", "y axis")
	var legend_main = svg.append("g").attr("class", "legend_main")
	
	var color = d3.scale.category10();;
	var color = d3.scale.ordinal()
  	.domain(["Data Points", "Regression line", "Bias", "Variance"])
  	.range(["#377eb8", "#e7298a" , "#6CC6B7", "#A8A2CD"])
	var scale_x = []
	var scale_y = []

	data = createData()
	showActualPicture()
	learnDrawCurve(1)
	learnDrawCurve(2)
	learnDrawCurve(3)
	learnDrawCurve(4)
//////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////

</script>


